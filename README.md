Разработать ассемблер и интерпретатор для учебной виртуальной машины
(УВМ). Система команд УВМ представлена далее.
Для ассемблера необходимо разработать читаемое представление команд
УВМ. Ассемблер принимает на вход файл с текстом исходной программы, путь к
которой задается из командной строки. Результатом работы ассемблера является
бинарный файл в виде последовательности байт, путь к которому задается из
командной строки. Дополнительный ключ командной строки задает путь к файлулогу, в котором хранятся ассемблированные инструкции в духе списков
“ключ=значение”, как в приведенных далее тестах.
Интерпретатор принимает на вход бинарный файл, выполняет команды УВМ
и сохраняет в файле-результате значения из диапазона памяти УВМ. Диапазон
также указывается из командной строки.
Форматом для файла-лога и файла-результата является json.
Необходимо реализовать приведенные тесты для всех команд, а также
написать и отладить тестовую программу.
Загрузка константы
A B C
Биты 0—7 Биты 8—23 Биты 24—29
42 Константа Адрес
Размер команды: 4 байт. Операнд: поле B. Результат: регистр по адресу,
которым является поле C.
Тест (A=42, B=857, C=3):
0x2A, 0x59, 0x03, 0x03
Чтение значения из памяти
77
A B C
Биты 0—7 Биты 8—27 Биты 28—33
185 Адрес Адрес
Размер команды: 5 байт. Операнд: значение в памяти по адресу, которым
является поле B. Результат: регистр по адресу, которым является поле C.
Тест (A=185, B=97, C=25):
0xB9, 0x61, 0x00, 0x90, 0x01
Запись значения в память
A B C
Биты 0—7 Биты 8—13 Биты 14—19
101 Адрес Адрес
Размер команды: 3 байт. Операнд: регистр по адресу, которым является поле
B. Результат: значение в памяти по адресу, которым является регистр по адресу,
которым является поле C.
Тест (A=101, B=24, C=37):
0x65, 0x58, 0x09
Бинарная операция: "<"
A B C
Биты 0—7 Биты 8—13 Биты 14—19
19 Адрес Адрес
Размер команды: 3 байт. Первый операнд: значение в памяти по адресу,
которым является регистр по адресу, которым является поле B. Второй операнд:
регистр по адресу, которым является поле C. Результат: значение в памяти по
адресу, которым является регистр по адресу, которым является поле B.
Тест (A=19, B=10, C=45):
0x13, 0x4A, 0x0B
Тестовая программа
Выполнить поэлементно операцию "<" над вектором длины 6 и числом 135.
Результат записать в исходный вектор.
